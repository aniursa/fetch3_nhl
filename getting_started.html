
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Getting Started &#8212; FETCH3  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Model configuration" href="model_config.html" />
    <link rel="prev" title="Welcome to FETCH3’s documentation!" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="index.html">
<p class="title">FETCH3</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="model_config.html">
  Model configuration
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="model_setup.html">
  Model setup
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="scaling.html">
  Scaling
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="nhl_functions.html">
  NHL transpiration
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/jemissik/fetch3_nhl" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#install-python">
     Install Python
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#install-fetch3">
     Install FETCH3
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#install-fetch3-s-dependencies">
     Install FETCH3’s dependencies
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prepare-input-files-for-the-model">
   Prepare input files for the model
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#meteorological-data">
     Meteorological data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#leaf-area-density-profile">
     Leaf area density profile
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prepare-configuration-file-for-the-model">
   Prepare configuration file for the model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-the-model">
   Running the model
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-input-and-output-directories">
     Setting input and output directories
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-the-model-from-the-command-line">
     Running the model from the command line
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">#</a></h1>
<p>To get started with FETCH3:</p>
<ol class="arabic simple">
<li><p>Install python, FETCH3, and its dependencies</p></li>
<li><p>Prepare input data for the model</p></li>
<li><p>Prepare configuration file</p></li>
</ol>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">#</a></h2>
<section id="install-python">
<h3>Install Python<a class="headerlink" href="#install-python" title="Permalink to this headline">#</a></h3>
<p>To use FETCH3, you must first have Python and the conda package manager
installed. There are two options for this:</p>
<ul class="simple">
<li><p><strong>Install Anaconda</strong>: This is the recommended option for those who are new to
Python. Anaconda comes with the Spyder IDE, which provides an interface similar to
RStudio and MATLAB, and Jupyter Notebook, which can be used to run interactive Python
notebooks such as those in FETCH3’s optimization examples. It also includes a graphical
interface (Anaconda Navigator) for launching applications and managing conda environments
without using the command line. To install Anaconda, see
<a class="reference external" href="https://docs.anaconda.com/anaconda/install/index.html">directions for installing Anaconda</a>.</p></li>
<li><p><strong>Install Miniconda</strong>: If you want a more minimal installation without any extra
packages, would prefer to handle installing a Python IDE yourself, and would prefer
to work from the command line instead of using the graphical interface provided
by Anaconda Navigator, you might prefer to install Miniconda rather than Anaconda.
Miniconda is a minimal version of Anaconda that includes just conda, its dependencies,
and Python. To install Miniconda, see
<a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">directions for installing Miniconda</a>.</p></li>
</ul>
</section>
<section id="install-fetch3">
<h3>Install FETCH3<a class="headerlink" href="#install-fetch3" title="Permalink to this headline">#</a></h3>
<p>Clone the FETCH3 repository from <a class="reference external" href="https://github.com/jemissik/fetch3_nhl">FETCH3’s GitHub page</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The NHL transpiration code is in a submodule inside the FETCH3 repository. Make sure
you have cloned the files in the <cite>nhl_transpiration</cite> submodule!</p>
</div>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>The NHL transpiration code will be moved out of a submodule in a future version</p></li>
<li><p>Eventually FETCH3 will be released as a package to make installation simpler</p></li>
</ul>
</div>
</section>
<section id="install-fetch3-s-dependencies">
<h3>Install FETCH3’s dependencies<a class="headerlink" href="#install-fetch3-s-dependencies" title="Permalink to this headline">#</a></h3>
<p>It is recommended to create a new conda environment for FETCH3, using the provided environment file.</p>
<p><strong>To install using the command line</strong>:</p>
<ol class="arabic">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">cd</span></code> to navigate into the FETCH3 directory that you cloned from GitHub.</p></li>
<li><p>Create FETCH3’s conda environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">--</span><span class="n">file</span> <span class="n">fetch3_requirements</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
</li>
<li><p>To activate the conda environment, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">fetch3</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><p>Make sure you’re using the FETCH3 conda environment when you try to run the model.</p>
<p>See this <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/_downloads/843d9e0198f2a193a3484886fa28163c/conda-cheatsheet.pdf">cheat sheet for working with conda</a> for
a helpful list of conda commands.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For Windows users, use the <strong>Anaconda Prompt</strong> application that was installed with Anaconda Navigator
to run these commands. See <a class="reference external" href="https://docs.anaconda.com/anaconda/user-guide/getting-started/#cli-hello">Instructions for Anaconda Prompt</a></p>
</div>
</section>
</section>
<section id="prepare-input-files-for-the-model">
<h2>Prepare input files for the model<a class="headerlink" href="#prepare-input-files-for-the-model" title="Permalink to this headline">#</a></h2>
<section id="meteorological-data">
<h3>Meteorological data<a class="headerlink" href="#meteorological-data" title="Permalink to this headline">#</a></h3>
<p>Prepare a .csv file with the required variables. See <code class="docutils literal notranslate"><span class="pre">UMBS_flux_2011.csv</span></code> in the data folder for an example,
although your file doesn’t need to have all of the variables that are included in this file.</p>
<p>The meteorological variables that are required depend on whether you are using PM or NHL transpiration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The column headers in the .csv file must match the names used below. Most of these names/units
match those used by AmeriFlux, except for Timestamp and VPD_kPa</p></li>
<li><p>The data should be gap-filled.</p></li>
</ul>
</div>
<p><strong>If using the PM transpiration scheme, the file must include:</strong></p>
<ul class="simple">
<li><p><em>Timestamp</em></p></li>
<li><p><em>P_F</em>: Precipitation [mm]</p></li>
<li><p><em>TA_F</em>: Air temperature [deg C]</p></li>
<li><p><em>SW_IN_F</em>: Incoming shortwave radiation [W m-2]</p></li>
<li><p><em>VPD_kPa</em>: Vapor pressure deficit [kPa]</p></li>
</ul>
<p><strong>If using the NHL transpiration scheme, the file must include:</strong></p>
<ul class="simple">
<li><p><em>Timestamp</em></p></li>
<li><p><em>P_F</em>: Precipitation [mm]</p></li>
<li><p><em>TA_F</em>: Air temperature [deg C]</p></li>
<li><p><em>SW_IN_F</em>: Incoming shortwave radiation [W m-2]</p></li>
<li><p><em>VPD_kPa</em>: Vapor pressure deficit [kPa]</p></li>
<li><p><em>WS_F</em>: Wind speed above the canopy [m s-1]</p></li>
<li><p><em>USTAR</em>: Friction velocity [m s-1]</p></li>
<li><p><em>PPFD_IN</em>: Incoming photosynthetic photon flux density (PAR) [µmolPhoton m-2 s-1]</p></li>
<li><p><em>CO2_F</em>: CO2 concentration [µmolCO2 mol-1]</p></li>
<li><p><em>RH</em>: Relative humidity [%]</p></li>
<li><p><em>TA_F</em>: Air temperature [deg C]</p></li>
<li><p><em>PA_F</em>: Atmospheric pressure [kPa]</p></li>
</ul>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>A future version will allow the user to specify different column names for the required met data</p>
</div>
</section>
<section id="leaf-area-density-profile">
<h3>Leaf area density profile<a class="headerlink" href="#leaf-area-density-profile" title="Permalink to this headline">#</a></h3>
<p>If using the NHL transpiration scheme, you must also include a .csv file with the normalized leaf
area density profile.</p>
<p>This file should include:</p>
<ul class="simple">
<li><p><em>z_h</em>: The normalized height for each layer (i.e. the height of the
canopy layer z divided by the tree height h)</p></li>
<li><p>Normalized LAD of each layer. You can include data for more than one species in
this file, and each column should be labeled with the species name or abbreviation.</p></li>
</ul>
<p>See <code class="docutils literal notranslate"><span class="pre">LAD_data.csv</span></code> for an example.</p>
<p>If using the PM transpiration scheme, the LAD profile will be calculated using a builtin function,
using parameters specified in the config file.</p>
</section>
</section>
<section id="prepare-configuration-file-for-the-model">
<h2>Prepare configuration file for the model<a class="headerlink" href="#prepare-configuration-file-for-the-model" title="Permalink to this headline">#</a></h2>
<p>Model setup options and model parameters are read from a .yml file.</p>
<p>See <a class="reference internal" href="model_config.html#model-configuration"><span class="std std-ref">Model configuration</span></a> for instructions about preparing this file.</p>
</section>
<section id="running-the-model">
<h2>Running the model<a class="headerlink" href="#running-the-model" title="Permalink to this headline">#</a></h2>
<section id="setting-input-and-output-directories">
<h3>Setting input and output directories<a class="headerlink" href="#setting-input-and-output-directories" title="Permalink to this headline">#</a></h3>
<p>The input data files, config file, and output directory can all be in locations of your
choice, and these locations are specified as command line arguments when you run the model.
If they aren’t specified, defaults will be used.</p>
<p><strong>Default input and output directories:</strong></p>
<ul class="simple">
<li><p>Input meteorological data: <code class="docutils literal notranslate"><span class="pre">./data/</span></code></p></li>
<li><p>Input configuration file: <code class="docutils literal notranslate"><span class="pre">./model_config.yml</span></code></p></li>
<li><p>Model output and logs: <code class="docutils literal notranslate"><span class="pre">./output/</span></code>
If using the default output directory, a directory <code class="docutils literal notranslate"><span class="pre">./output/</span></code> will be created
if it doesn’t already exist.</p></li>
</ul>
</section>
<section id="running-the-model-from-the-command-line">
<h3>Running the model from the command line<a class="headerlink" href="#running-the-model-from-the-command-line" title="Permalink to this headline">#</a></h3>
<p>Run the model by running <code class="docutils literal notranslate"><span class="pre">main.py</span></code></p>
<p>To specify an input config file, data directory, or output directory in a location other than the
default, different directories can be specified as command line arguments, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">config_path</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">username</span><span class="o">/</span><span class="n">fetch3</span><span class="o">/</span><span class="n">user_model_config</span><span class="o">.</span><span class="n">yml</span>
<span class="o">--</span><span class="n">data_path</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">username</span><span class="o">/</span><span class="n">fetch3</span><span class="o">/</span><span class="n">user_data</span><span class="o">/</span> <span class="o">--</span><span class="n">output_path</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">username</span><span class="o">/</span><span class="n">fetch3</span><span class="o">/</span><span class="n">output</span><span class="o">/</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace the paths and filenames in this example with the actual paths and files you are using.</p>
</div>
<p>If the arguments <code class="docutils literal notranslate"><span class="pre">--config_path</span></code>, <code class="docutils literal notranslate"><span class="pre">--data_path</span></code>, and <code class="docutils literal notranslate"><span class="pre">--output_path</span></code> are omitted when running the
model from the command line, the defaults will be used.</p>
</section>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Welcome to FETCH3’s documentation!</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="model_config.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Model configuration</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Justine Missik.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>